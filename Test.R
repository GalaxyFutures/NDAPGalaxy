OriginalBondInfo<-list()
OriginalBondInfo$code.IB<-c("050012.IB","080003.IB","080018.IB","090003.IB","090027.IB","090023.IB","090007.IB","090016.IB","100002.IB","100024.IB","100007.IB","100034.IB","100031.IB","100012.IB","110021.IB","110006.IB","110003.IB","110017.IB","120016.IB","120010.IB","120005.IB","130003.IB","130001.IB","130008.IB","130013.IB","130015.IB","130020.IB","080025.IB","080010.IB","090012.IB","100019.IB","100041.IB","110002.IB","110008.IB")
OriginalBondInfo$issuedate<-c("2005/11/15","2008/03/20","2008/09/22","2009/03/12","2009/11/05","2009/09/17","2009/05/07","2009/07/23","2010/02/04","2010/08/05","2010/03/25","2010/10/28","2010/09/16","2010/05/13","2011/10/13","2011/03/03","2011/01/27","2011/07/07","2012/09/06","2012/06/07","2012/03/08","2013/01/24","2013/01/10","2013/04/18","2013/05/30","2013/07/11","2013/10/17","2008/12/15","2008/06/23","2009/06/18","2010/06/24","2010/12/16","2011/01/20","2011/03/17")
OriginalBondInfo$maturitydate<-c("2020/11/15","2018/03/20","2018/09/22","2019/03/12","2019/11/05","2019/09/17","2019/05/07","2019/07/23","2020/02/04","2020/08/05","2020/03/25","2020/10/28","2020/09/16","2020/05/13","2018/10/13","2018/03/03","2018/01/27","2018/07/07","2019/09/06","2019/06/07","2019/03/08","2020/01/24","2018/01/10","2020/04/18","2018/05/30","2020/07/11","2020/10/17","2018/12/15","2018/06/23","2019/06/18","2020/06/24","2020/12/16","2021/01/20","2021/03/17")
OriginalBondInfo$couponrate<-c(3.65,4.07,3.68,3.05,3.68,3.44,3.02,3.48,3.43,3.28,3.36,3.67,3.29,3.25,3.65,3.75,3.83,3.7,3.25,3.14,3.41,3.42,3.15,3.29,3.09,3.46,4.07,2.9,4.41,3.09,3.41,3.77,3.94,3.83)
OriginalBondInfo$frequency<-c(2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2)
BondInfo = InitGovBondInfo( OriginalBondInfo )
TFInfo<-list()
TFInfo$TFname<-c("TF1312","TF1403","TF1406")
TFInfo$LastTradeDate<-c(as.Date("2013-12-13"),as.Date("2014-03-14"),as.Date("2014-06-13"))
TFInfo$settlementMonth<-c(as.Date("2013-12-01"),as.Date("2014-03-01"),as.Date("2014-06-01"))
QuoteMoneyMarket_AllRepo<-c(3.08,3.45,3.7,5,4.7,4.96,4.96,5.3,5.55,5.5,5.95)
QuoteTF <- list()
QuoteTF$TF1312$date=c(as.Date("2013-10-23"))
QuoteTF$TF1312$close=c(93.772)
QuoteTF$TF1403$date=c(as.Date("2013-10-23"))
QuoteTF$TF1403$close=c(93.91)
QuoteTF$TF1406$date=c(as.Date("2013-10-23"))
QuoteTF$TF1406$close=c(94.024)
QuoteBond <- list()
QuoteBond[['050012.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['050012.IB']]$priceClean=c(97.3612)
QuoteBond[['080003.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['080003.IB']]$priceClean=c(100.6525)
QuoteBond[['080018.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['080018.IB']]$priceClean=c(98.8329)
QuoteBond[['090003.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['090003.IB']]$priceClean=c(95.4751)
QuoteBond[['090027.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['090027.IB']]$priceClean=c(98.0256)
QuoteBond[['090023.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['090023.IB']]$priceClean=c(96.8532)
QuoteBond[['090007.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['090007.IB']]$priceClean=c(95.131)
QuoteBond[['090016.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['090016.IB']]$priceClean=c(97.2012)
QuoteBond[['100002.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100002.IB']]$priceClean=c(96.5024)
QuoteBond[['100024.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100024.IB']]$priceClean=c(95.3176)
QuoteBond[['100007.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100007.IB']]$priceClean=c(96.0404)
QuoteBond[['100034.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100034.IB']]$priceClean=c(97.5113)
QuoteBond[['100031.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100031.IB']]$priceClean=c(95.2877)
QuoteBond[['100012.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100012.IB']]$priceClean=c(95.3203)
QuoteBond[['110021.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['110021.IB']]$priceClean=c(98.5043)
QuoteBond[['110006.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['110006.IB']]$priceClean=c(99.2097)
QuoteBond[['110003.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['110003.IB']]$priceClean=c(99.5559)
QuoteBond[['110017.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['110017.IB']]$priceClean=c(98.8626)
QuoteBond[['120016.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['120016.IB']]$priceClean=c(95.717)
QuoteBond[['120010.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['120010.IB']]$priceClean=c(95.441)
QuoteBond[['120005.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['120005.IB']]$priceClean=c(97.0368)
QuoteBond[['130003.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['130003.IB']]$priceClean=c(96.2753)
QuoteBond[['130001.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['130001.IB']]$priceClean=c(96.971)
QuoteBond[['130008.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['130008.IB']]$priceClean=c(95.3862)
QuoteBond[['130013.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['130013.IB']]$priceClean=c(96.3841)
QuoteBond[['130015.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['130015.IB']]$priceClean=c(96.2034)
QuoteBond[['130020.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['130020.IB']]$priceClean=c(NaN)
QuoteBond[['080025.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['080025.IB']]$priceClean=c(95.0723)
QuoteBond[['080010.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['080010.IB']]$priceClean=c(102.0563)
QuoteBond[['090012.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['090012.IB']]$priceClean=c(95.3236)
QuoteBond[['100019.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100019.IB']]$priceClean=c(96.1562)
QuoteBond[['100041.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['100041.IB']]$priceClean=c(98.0522)
QuoteBond[['110002.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['110002.IB']]$priceClean=c(99.061)
QuoteBond[['110008.IB']]$date=c(as.Date("2013-10-23"))
QuoteBond[['110008.IB']]$priceClean=c(98.3203)
BondInfo = ResetToday(BondInfo,"GOV","2013-10-23",FALSE,FALSE,TRUE)
BondInfo = AddTFInfo_bis(BondInfo,"GOV",TFInfo)
vtConversionFactor<-c(1.0403,1.039,1.0377,1.0424,0,0,1.0299,0,1.0269,1.0024,0,1.0022,1.0366,1.0352,1.0337,1.023,0,1.0212,1.001,1.0009,1.0009,1.0245,1.0235,1.0225,1.024,1.0231,1.0222,1.0168,1.0162,1.0156,1.0203,0,1.0189,1.0411,1.0397,1.0384,1.0176,0,1.0164,1.0145,1.014,1.0134,1.0288,1.0273,1.0259,1.0294,0,0,1.0314,0,0,1.0294,1.0279,1.0265,1.0129,1.0124,1.0119,1.0069,1.0066,0,1.0196,0,1.0178,1.023,1.0221,1.0212,1.0056,0,0,1.0164,1.0159,1.0152,1.0036,1.0034,0,1.027,1.0261,1.0252,1.0651,1.0629,1.0608,0,0.9956,0,0,1.0558,0,0,1.0043,0,0,1.0232,0,0,1.0467,0,0,1.0577,1.0558,0,0,1.0503)
BondInfo$GOV$conversionFactor<-matrix(vtConversionFactor,3,34)
rownames(BondInfo$GOV$conversionFactor)<-c("TF1312","TF1403","TF1406")
colnames(BondInfo$GOV$conversionFactor)<-c("050012.IB","080003.IB","080018.IB","090003.IB","090027.IB","090023.IB","090007.IB","090016.IB","100002.IB","100024.IB","100007.IB","100034.IB","100031.IB","100012.IB","110021.IB","110006.IB","110003.IB","110017.IB","120016.IB","120010.IB","120005.IB","130003.IB","130001.IB","130008.IB","130013.IB","130015.IB","130020.IB","080025.IB","080010.IB","090012.IB","100019.IB","100041.IB","110002.IB","110008.IB")
BondInfo = InitBondYTM(BondInfo,"GOV",QuoteBond)
BondInfo = InitTFPrice(BondInfo,"GOV",QuoteTF)
result1 = Calculate_BondPrice_from_TFPrice_repoVector(BondInfo,"GOV",TFInfo,QuoteMoneyMarket_AllRepo)
BondInfo = CalculateIRR(BondInfo,"GOV",TFInfo)
BondInfo = FindCTD(BondInfo,"GOV",TFInfo)
BondInfo = InitBPV(BondInfo,"GOV") 
result = CalculateRepoRelated(BondInfo,"GOV",TFInfo,QuoteMoneyMarket_AllRepo)